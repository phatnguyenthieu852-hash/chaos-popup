<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="utf-8">
<title>ULTRA LOCK</title>
<style>
body{background:#000;color:#fff;text-align:center;font-family:Arial;margin-top:60px}
button{padding:14px 20px;font-size:18px;margin:8px}
</style>
</head>
<body>

<h1>üëπ ULTRA LOCK</h1>
<button onclick="start()">START</button>
<button onclick="stopAll()">STOP</button>

<script>
const W=260,H=150;
const MAX_POP=30;
let pops=[];
let mouse={x:0,y:0}, lastMouse={x:0,y:0};

document.addEventListener("mousemove",e=>{
  lastMouse=mouse;
  mouse={x:e.screenX,y:e.screenY};
  pops.forEach(p=>{ try{p.postMessage({mouse,lastMouse},"*")}catch{} });
});

function popupHTML(){
return `
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=260, initial-scale=1, maximum-scale=1, user-scalable=no">
<style>
html,body{
  margin:0;padding:0;width:260px;height:150px;overflow:hidden;
  background:#000;color:#0f0;text-align:center;font-family:Arial;
  -ms-content-zooming:none; touch-action:none;
}
#t{margin-top:40px}
</style>
</head>
<body>
<h3 id="t">ULTRA LOCK</h3>

<script>
const W=260,H=150;
let mouse={x:0,y:0}, lastMouse={x:0,y:0};
window.addEventListener("message",e=>{
  mouse=e.data.mouse||mouse;
  lastMouse=e.data.lastMouse||lastMouse;
});

// üîí kh√≥a k√≠ch th∆∞·ªõc & ch·ªëng fullscreen/zoom
function ultraLock(){
  try{
    if(document.fullscreenElement){ document.exitFullscreen(); }
  }catch(e){}
  try{
    if(window.outerWidth!==W || window.outerHeight!==H){
      window.resizeTo(W,H);
    }
  }catch(e){}
}
setInterval(ultraLock,120);

// üß† n√© chu·ªôt (d·ª±a tr√™n d·ª± ƒëo√°n h∆∞·ªõng)
setInterval(()=>{
  let sx=window.screenX, sy=window.screenY;
  let vx=mouse.x-lastMouse.x, vy=mouse.y-lastMouse.y;
  let px=mouse.x+vx*4, py=mouse.y+vy*4; // d·ª± ƒëo√°n
  let dx=sx-px, dy=sy-py;
  let nx=sx+(Math.random()*120-60);
  let ny=sy+(Math.random()*120-60);
  if(Math.hypot(dx,dy)<260){ nx=sx+dx*1.6; ny=sy+dy*1.6; }
  try{
    window.moveTo(
      Math.max(0,Math.min(screen.availWidth-W,nx)),
      Math.max(0,Math.min(screen.availHeight-H,ny))
    );
  }catch(e){}
},60);

// üîä n√≥i ng·∫´u nhi√™n
setInterval(()=>{
  try{
    const words=["ai h·ªèi","gah dayumüíîü•Ä","ULTRA LOCK"];
    let u=new SpeechSynthesisUtterance(words[Math.floor(Math.random()*words.length)]);
    let v=speechSynthesis.getVoices();
    if(v.length)u.voice=v[Math.floor(Math.random()*v.length)];
    speechSynthesis.speak(u);
  }catch(e){}
},2200);

<\/script>
</body>
</html>
`;
}

function createPopup(){
  if(pops.length>=MAX_POP) return;
  const p=window.open(
    "",
    "",
    "popup=yes,width=260,height=150,left=120,top=120,resizable=no,menubar=no,toolbar=no,location=no,status=no,scrollbars=no"
  );
  if(!p) return;
  try{
    p.document.open();
    p.document.write(popupHTML());
    p.document.close();
  }catch(e){}
  pops.push(p);
}

function start(){
  for(let i=0;i<6;i++) createPopup();
  window._loop=setInterval(createPopup,7000);
}

function stopAll(){
  clearInterval(window._loop);
  pops.forEach(p=>{ try{p.close()}catch{} });
  pops=[];
}
</script>

</body>
</html>
